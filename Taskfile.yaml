version: "3"

tasks:
  run:
    cmds:
      - cd server/src && air run main.go

  test-all:
    cmds:
      - cd server && go test ./tests/...

  format:
    cmds:
      - cd server && go fmt ./... && cd ../client && yarn format
  
  insert:
    cmds:
      - cd scripts && ./insert-db.sh
  
  drop:
    cmds:
      - cd scripts && ./reset-db.sh
  
  reset:
    cmds:
      - cd scripts && ./reset-db.sh && ./insert-db.sh
  
  connect:
    cmds:
      - psql -U postgres -W -p 5432 -h localhost -d legacy